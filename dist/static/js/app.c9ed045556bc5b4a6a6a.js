webpackJsonp([1],{"+pNz":function(t,e){},0:function(t,e){},"7zck":function(t,e){},DC1j:function(t,e){},DExR:function(t,e){},FBvA:function(t,e){},FtU7:function(t,e){},J8eP:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("7+uW"),n=s("yGkR"),a=(s("881v"),{data:function(){return{user:null,drawer:!1}},created:function(){var t=this;this.$store.dispatch("initAuth"),n.a.auth().onAuthStateChanged(function(e){e&&t.$store.dispatch("autoLoginUser",e)})},methods:{logOut:function(){this.$store.dispatch("logoutUser"),this.$router.push("/")}},computed:{isUserLoggedIn:function(){return this.$store.getters.isUserLoggedIn},links:function(){if(this.isUserLoggedIn){return[{title:"Chat",url:"/chat"},{title:"About Us",url:"/about"},{title:"Profile",url:"/profile"}]}return[{title:"About us",url:"/about"},{title:"Login",url:"/login"},{title:"Register",url:"/register"}]}}}),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",[s("v-app-bar-nav-icon",[s("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("v-list-item-group",[t._l(t.links,function(e){return s("v-list-item",{key:e.title,attrs:{to:e.url}},[s("v-btn",{attrs:{text:""}},[t._v(t._s(e.title))])],1)}),t._v(" "),s("v-list-item",[t.isUserLoggedIn?s("v-btn",{attrs:{text:""},on:{click:t.logOut}},[t._v("\n            Log Out\n          ")]):t._e()],1)],2)],1)],1),t._v(" "),s("v-toolbar",{staticClass:"header",attrs:{dense:""}},[s("v-app-bar-nav-icon",{staticClass:"hidden-md-and-up",on:{click:function(e){t.drawer=!t.drawer}}}),t._v(" "),s("v-toolbar-title",[s("v-btn",{attrs:{to:"/",text:""}},[t._v("Home")])],1),t._v(" "),s("v-spacer"),t._v(" "),s("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[t._l(t.links,function(e){return s("v-btn",{key:e.title,staticClass:"ml-3",attrs:{to:e.url}},[t._v(t._s(e.title))])}),t._v(" "),t.isUserLoggedIn?s("v-btn",{attrs:{text:""},on:{click:t.logOut}},[t._v("Log Out")]):t._e()],2)],1),t._v(" "),s("v-container",[s("router-view")],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(a,i,!1,function(t){s("DC1j")},null,null).exports,c=s("3EgV"),l=s.n(c),u=(s("7zck"),s("8+8L")),d=s("/ocq"),f={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-text-field",{attrs:{rules:t.emailRules,label:"Email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),s("v-text-field",{attrs:{rules:t.passwordRules,label:"Password",required:"",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),s("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"#1B5E20"},on:{click:t.login}},[t._v("\n      Login\n    ")])],1)],1)},staticRenderFns:[]};var p=s("VU/8")({data:function(){return{valid:!0,email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],password:"",passwordRules:[function(t){return!!t||"Password is required"}]}},methods:{login:function(){var t=this,e={email:this.email,password:this.password};this.$store.dispatch("loginUser",e).then(function(){t.$router.push("/chat")})}}},f,!1,function(t){s("DExR")},null,null).exports,h=(s("oPmM"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",[e("v-parallax",{attrs:{src:"https://img.freepik.com/free-photo/vivid-blurred-colorful-background_58702-2655.jpg?w=1060&t=st=1676973606~exp=1676974206~hmac=58923b173c132bce6ba41f62cbf807149c731ee02b187e29083717cb5919c7e3"}},[e("v-row",{attrs:{align:"center",justify:"center"}},[e("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e("h1",{staticClass:"heart-beat-animation"},[this._v("Chat!")]),this._v(" "),this.showElement?e("v-btn",{staticClass:"slide-up-animation",attrs:{height:"50px",width:"300px"},on:{click:this.toRegister}},[this._v("Begin work!")]):this._e()],1)],1)],1)],1)},staticRenderFns:[]});var m=s("VU/8")({data:function(){return{showElement:!1}},mounted:function(){this.showElement=!0},computed:{isUserLoggedIn:function(){return this.$store.getters.isUserLoggedIn}},methods:{toRegister:function(){this.isUserLoggedIn?this.$router.push("/chat"):this.$router.push("/register")}}},h,!1,function(t){s("FtU7")},"data-v-eee3b184",null).exports,v=s("Dd8w"),g=s.n(v),w=s("NYxO"),b={data:function(){var t=this;return{email:"",password:"",confirmPassword:"",valid:!0,emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],passwordRules:[function(t){return!!t||"Password is required"}],confirmPasswordRules:[function(t){return!!t||"Password is required"},function(e){return e===t.password||"Password must match  "}]}},methods:g()({},Object(w.b)(["registUser"]),{register:function(){var t=this,e={email:this.email,password:this.password};this.registUser(e).then(function(){t.$router.push("/chat")})}})},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-text-field",{attrs:{rules:t.emailRules,label:"Email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),s("v-text-field",{attrs:{rules:t.passwordRules,label:"Password",required:"",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),s("v-text-field",{attrs:{rules:t.confirmPasswordRules,label:" Confirm Password",required:"",type:"password"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}}),t._v(" "),s("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"#1B5E20"},on:{click:t.register}},[t._v("\n      Create account!\n    ")])],1)],1)},staticRenderFns:[]};var U=s("VU/8")(b,_,!1,function(t){s("T14u")},null,null).exports,x=s("Xxa5"),k=s.n(x),I=s("exGp"),C=s.n(I),R={data:function(){return{search:"",selectedUser:null,roomID:null,showElement:!1}},mounted:function(){this.showElement=!0},computed:{getUsers:function(){return this.$store.getters.getUsers},user:function(){return this.$store.getters.getUser},searchUser:function(){var t=this,e=this.$store.getters.getUsers;return this.search?e.filter(function(e){return e.email.includes(t.search)}):e}},methods:{createRoom:function(t){var e=this;return C()(k.a.mark(function s(){var r,a,i,o;return k.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return e.$set(e,"selectedUser",t),r=e.$store.getters.getUser,a=e.selectedUser,i={users:[r,a]},o=null,s.next=7,n.a.firestore().collection("room").get().then(function(t){t.forEach(function(t){var e=t.data(),s=e.users.find(function(t){return t.id==r.id}),n=e.users.find(function(t){return t.id==a.id});s&&n&&(o=e)})});case 7:s.sent,o?e.$router.push("/room/"+o.chatID):n.a.firestore().collection("room").add(i).then(function(t){n.a.firestore().collection("room").doc(t.id).update({chatID:t.id}),e.$router.push("/room/"+t.id)});case 9:case"end":return s.stop()}},s,e)}))()}},created:function(){this.$store.dispatch("fetchUsers"),this.searchUser}},E={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[t.showElement?s("v-card",{staticClass:"fade-in-animation",attrs:{"max-width":"1200"}},[s("v-toolbar",{attrs:{color:"indigo",dark:""}},[s("v-toolbar-title",[t._v("Inbox")]),t._v(" "),s("v-spacer"),t._v(" "),s("v-text-field",{attrs:{color:"white","append-icon":"mdi-magnify",label:"Search",placeholder:"User Email","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),s("v-list",{attrs:{light:"",active:""}},t._l(t.searchUser,function(e){return s("v-list-item",{key:e.id,on:{click:function(s){return t.createRoom(e)}}},[s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(e.email))])],1),t._v(" "),s("v-list-item-avatar",[s("v-img",{attrs:{src:e.photoURL}})],1)],1)}),1)],1):t._e()],1)},staticRenderFns:[]};var y=s("VU/8")(R,E,!1,function(t){s("FBvA")},"data-v-26c93c39",null).exports,$={render:function(){var t=this.$createElement,e=this._self._c||t;return this.showElement?e("v-app",{staticClass:"slide-left-animation"},[e("v-row",{staticClass:"d-flex justify-center mt-10"},[e("v-img",{attrs:{src:"https://img.freepik.com/free-photo/artistic-blurry-colorful-wallpaper-background_58702-8298.jpg?w=1060&t=st=1677071253~exp=1677071853~hmac=4b3bd7440bb2fb6e4bc36159041900549005d335f917193f86194117ad7b3a4a",contain:"","max-height":"400"}},[e("div",{staticClass:"text-overlay"},[e("h1",{staticClass:"text-center"},[this._v("Hi! We are Chat Project")])])])],1)],1):this._e()},staticRenderFns:[]};var L=s("VU/8")({data:function(){return{showElement:!1}},mounted:function(){this.showElement=!0}},$,!1,function(t){s("J8eP")},"data-v-4f3f4b30",null).exports,A={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showElement?s("v-app",{staticClass:"fade-in"},[s("v-card",{staticClass:"mx-auto",attrs:{width:"1000"}},[s("v-img",{attrs:{src:"https://img.freepik.com/free-photo/vivid-blurred-colorful-wallpaper-background_58702-3897.jpg?w=1060&t=st=1677152400~exp=1677153000~hmac=110f2d75d1b97a50138eb6cc3f23c39b4aa27369e314e156de16ce4f0e361294",height:"200"}}),t._v(" "),s("v-row",{staticStyle:{margin:"2.5%",position:"absolute",top:"130px"}},[s("v-list-item",[s("v-list-item-avatar",{attrs:{size:"100"}},[s("img",{attrs:{src:t.photo,alt:"User Avatar"}})]),t._v(" "),s("v-list-item-content",[t.user?s("v-list-item-title",{staticClass:"title",staticStyle:{"margin-top":"20px"}},[t._v("\n            "+t._s(t.user.email)+"\n          ")]):t._e()],1)],1),t._v(" "),s("v-btn",{staticClass:"primary mt-3",on:{click:t.triggerUpload}},[t._v("\n        Change avatar\n      ")]),t._v(" "),s("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.onFileChange}})],1)],1)],1):t._e()},staticRenderFns:[]};var P=s("VU/8")({data:function(){return{showElement:!1}},mounted:function(){this.showElement=!0},computed:{user:function(){return this.$store.getters.getUser},photo:function(){return this.$store.getters.getUserAvatar}},methods:{triggerUpload:function(){this.$refs.fileInput.click()},onFileChange:function(t){var e=t.target.files[0];this.$store.dispatch("updateUserAvatar",e)}}},A,!1,function(t){s("xte8")},"data-v-52ed8741",null).exports,D=s("Gu7T"),S=s.n(D),F=s("2bpm"),M=s.n(F),j={data:function(){return{newMessage:"",messages:[]}},mounted:function(){var t=this;this.fetchMessages(),this.$nextTick(function(){t.$refs.container.scrollTo({top:t.$refs.container.scrollHeight,behavior:"smooth"})})},computed:{user:function(){return this.$store.getters.getUser}},props:["roomID"],methods:{sendMessage:function(){var t=this,e={text:this.newMessage,userID:this.user.id,messageID:M()()};n.a.firestore().collection("room").doc(this.roomID).update({messages:n.a.firestore.FieldValue.arrayUnion(e)}).then(function(){t.newMessage=""}).catch(function(t){alert("oh!something wrong"+t)})},fetchMessages:function(){var t=this;n.a.firestore().collection("room").doc(this.roomID).onSnapshot(function(e){if(e.exists){var s,r=e.data().messages;r.sort(function(t,e){return t.messageID!=e.messageID}),(s=t.messages).splice.apply(s,[0,t.messages.length].concat(S()(r)))}})}}},q={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-app",[s("v-app-bar",{attrs:{color:"blue","collapse-on-scroll":""}},[s("v-toolbar-title",{staticClass:"white--text"},[t._v("Sushant ")])],1),t._v(" "),s("v-container",{staticClass:"fill-height"},[s("v-row",{ref:"container",staticClass:"fill-height pb-14",attrs:{align:"end"}},[s("v-col",t._l(t.messages,function(e){return s("div",{key:e.chatID,class:["d-flex flex-row align-center my-2",e.userID==t.user.id?"justify-end":null]},[e.userID==t.user.id?s("span",{staticClass:"mr-3 blue rounded-pill pa-2"},[t._v(t._s(e.text))]):s("span",{staticClass:"mr-3 white black--text rounded-pill pa-2"},[t._v(t._s(e.text))])])}),0)],1)],1),t._v(" "),s("v-footer",{attrs:{fixed:""}},[s("v-container",{staticClass:"ml-30 pa-0"},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",[s("div",{staticClass:"d-flex flex-row align-center"},[s("v-text-field",{attrs:{placeholder:"Type Something"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage.apply(null,arguments)}},model:{value:t.newMessage,callback:function(e){t.newMessage=e},expression:"newMessage"}}),t._v(" "),s("v-btn",{staticClass:"ml-4",attrs:{icon:""},on:{click:t.sendMessage}},[s("v-icon",[t._v("mdi-send")])],1)],1)])],1)],1)],1)],1)],1)},staticRenderFns:[]};var O=s("VU/8")(j,q,!1,function(t){s("+pNz")},null,null).exports;r.default.use(d.a);var V=new d.a({routes:[{path:"/",name:"Home",component:m},{path:"/login",name:"Login",component:p},{path:"/register",name:"Register",component:U},{path:"/chat",name:"Chat",component:y},{path:"/about",name:"About",component:L},{path:"/profile",name:"Profile",component:P},{path:"/room/:roomID",name:"Room",props:!0,component:O}],mode:"history"}),z=s("Zrlr"),T=s.n(z),H=function t(e){T()(this,t),this.id=e},B={state:{user:null},mutations:{setUser:function(t,e){t.user=e}},actions:{registUser:function(t,e){var s=this,r=t.commit,a=e.email,i=e.password;return C()(k.a.mark(function t(){var e;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.auth().createUserWithEmailAndPassword(a,i);case 2:e=t.sent,n.a.firestore().collection("profile").doc(e.user.uid).set({id:e.user.uid,email:a,password:i}),r("setUser",new H(e.id));case 5:case"end":return t.stop()}},t,s)}))()},loginUser:function(t,e){var s=this,r=t.commit,a=e.email,i=e.password;return C()(k.a.mark(function t(){var e;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.auth().signInWithEmailAndPassword(a,i);case 2:e=t.sent,r("setUser",new H(e.id));case 4:case"end":return t.stop()}},t,s)}))()},autoLoginUser:function(t,e){(0,t.commit)("setUser",new H(e.uid))},logoutUser:function(t){var e=t.commit;n.a.auth().signOut(),e("setUser",null)}},getters:{isUserLoggedIn:function(t){return null!==t.user}}},N=(s("cWbj"),{state:{userId:null,user:null,photoURL:null},mutations:{setUserId:function(t,e){t.userId=e},setUser:function(t,e){t.user=e},updateAvatar:function(t,e){t.photoURL=e}},actions:{initAuth:function(t){var e=t.commit;n.a.auth().onAuthStateChanged(function(t){t&&(e("setUserId",t.uid),n.a.firestore().collection("profile").doc(t.uid).get().then(function(t){t.exists?(e("setUser",t.data()),e("updateAvatar",t.data().photoURL)):(e("setUserId",null),e("setUser",null))}))})},updateUserAvatar:function(t,e){var s=this,r=t.commit,a=t.state;return C()(k.a.mark(function t(){var i,o;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.name.slice(e.name.lastIndexOf(".")),t.next=3,n.a.storage().ref("avatar/"+a.userId).put(e);case 3:return i=t.sent,t.next=6,i.ref.getDownloadURL();case 6:o=t.sent,n.a.firestore().collection("profile").doc(a.userId).set(g()({},a.user,{photoURL:o})),r("updateAvatar",o);case 9:case"end":return t.stop()}},t,s)}))()}},getters:{getUserId:function(t){return t.userId},getUser:function(t){return t.user},getUserAvatar:function(t){return t.photoURL}}}),G={state:{data:[],userSearch:[]},mutations:{setUsers:function(t,e){t.data=e}},actions:{fetchUsers:function(t){var e=this,s=t.commit;return C()(k.a.mark(function t(){var r;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,n.a.firestore().collection("profile").get();case 3:t.sent.forEach(function(t){r.push(t.data())}),s("setUsers",r);case 6:case"end":return t.stop()}},t,e)}))()}},getters:{getUsers:function(t){return t.data}}};r.default.use(w.a);var W=new w.a.Store({modules:{user:B,profile:N,chat:G}}),J=(s("csSS"),{apiKey:"AIzaSyDFKGpRaawwPph8zgHjUL8TU4kzS2DTAA0",authDomain:"chat-ef3de.firebaseapp.com",databaseURL:"https://chat-ef3de-default-rtdb.europe-west1.firebasedatabase.app",projectId:"chat-ef3de",storageBucket:"chat-ef3de.appspot.com",messagingSenderId:"22542600410",appId:"1:22542600410:web:13bb93ea029709c0e2bde3",measurementId:"G-Y7MJN29H20"});r.default.use(u.a),r.default.use(l.a);e.default=new l.a({icons:{defaultSet:"mdi"},theme:{dark:!0}});r.default.config.productionTip=!1,new r.default({el:"#app",vuetify:new l.a,router:V,store:W,uniqid:M.a,VueResource:u.a,components:{App:o},created:function(){n.a.initializeApp(J),n.a.firestore()},template:"<App/>"})},T14u:function(t,e){},csSS:function(t,e){},oPmM:function(t,e){},xte8:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c9ed045556bc5b4a6a6a.js.map